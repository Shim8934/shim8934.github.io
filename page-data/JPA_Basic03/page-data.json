{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/JPA_Basic03/",
    "result": {"data":{"cur":{"id":"7bd8c570-24fa-5935-89e4-1887ec7e51e6","html":"<h2 id=\"다양한-연관-관계-매핑-기초\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EA%B8%B0%EC%B4%88\" aria-label=\"다양한 연관 관계 매핑 기초 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다양한 연관 관계 매핑 기초</h2>\n<blockquote>\n<p>들어가기 전에</p>\n<p>프로그래머스에서 JPA가 아닌 JDBC Template를 이용한 <a href=\"https://programmers.co.kr/skill_check_assignments/232\">과제관</a>이 있다. 과제관을 다 풀진 못 했었지만, JPA를 사용하는 근본 목적과 동일한 생각을 경험했다.  → JDBC Template을 사용하면 객체 중심적인 프로그래밍이 아닌 SQL 매퍼로서의 프로그래밍을 하겠끔 된다?</p>\n<p>위의 경험으로 이 상황을 연관 관계로 풀어낼 수 있는 지가 JPA를 사용하는 숙련도 판단 근거일 것이라 생각한다. (물론 그 배경으로 관계형 DB 모델에 관한 숙련도가 있겟지만..)</p>\n<p>그래서 이번 강의 시간과 차후 강의인 고급 매핑, 상속관계를 나만의 방식으로 체득해야겠다고 다짐했다.</p>\n</blockquote>\n<hr>\n<h3 id=\"1-객체와-테이블-연관-관계의-차이\" style=\"position:relative;\"><a href=\"#1-%EA%B0%9D%EC%B2%B4%EC%99%80-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84%EC%9D%98-%EC%B0%A8%EC%9D%B4\" aria-label=\"1 객체와 테이블 연관 관계의 차이 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 객체와 테이블 연관 관계의 차이</h3>\n<ul>\n<li>다음과 같은 Member, Team 객체가 있고, DB(테이블)에 맞춘 모델링을 한 것이라 가정하자.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 535px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAMABQDASIAAhEBAxEB/8QAGQAAAgMBAAAAAAAAAAAAAAAAAAECAwQF/8QAFAEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAB7bp0ERB//8QAGRAAAwADAAAAAAAAAAAAAAAAAAEhEBES/9oACAEBAAEFArimq0co/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFxABAAMAAAAAAAAAAAAAAAAAACAhMf/aAAgBAQAGPwJTYf/EABoQAAMBAAMAAAAAAAAAAAAAAAABESFRofH/2gAIAQEAAT8hWnX2ZwTJ6CS2UUrEX//aAAwDAQACAAMAAAAQQM//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAdEAEAAgICAwAAAAAAAAAAAAABABEhYTFRkaHB/9oACAEBAAE/EMo2gFTj6ioUFedvkuS1zlYLoNjAFFgdT//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"obj01\"\n        title=\"obj01\"\n        src=\"/static/c4b7cc4c363c75cb37d5e55dca6bb806/b542f/obj01.jpg\"\n        srcset=\"/static/c4b7cc4c363c75cb37d5e55dca6bb806/4ec73/obj01.jpg 180w,\n/static/c4b7cc4c363c75cb37d5e55dca6bb806/158ba/obj01.jpg 360w,\n/static/c4b7cc4c363c75cb37d5e55dca6bb806/b542f/obj01.jpg 535w\"\n        sizes=\"(max-width: 535px) 100vw, 535px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Member.java</span>\r\n<span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span>\r\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"MEMBER_ID\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"USERNAME\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"TEAM_ID\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> teamId<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\">// Getter, Setter, ToString()</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Team.java</span>\r\n<span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Team</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Id</span>\r\n    <span class=\"token annotation punctuation\">@GeneratedValue</span>\r\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"TEAM_ID\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\">// Getter, Setter, ToString()</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h4 id=\"-의문점\" style=\"position:relative;\"><a href=\"#-%EC%9D%98%EB%AC%B8%EC%A0%90\" aria-label=\" 의문점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>* 의문점</h4>\n<ul>\n<li>Member를 통해 Team 객체의 정보를 얻어오려면 어떤 방식을 거치게 될까?</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMain</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// Main.java 일부</span>\r\n    <span class=\"token comment\">// Team과 Member 객체를 저장시키기 위한 과정 Start</span>\r\n    <span class=\"token class-name\">Team</span> team <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    team<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TeamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    em<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    member<span class=\"token punctuation\">.</span><span class=\"token function\">setUsername</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    member<span class=\"token punctuation\">.</span><span class=\"token function\">setTeamId</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    em<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\">// Team과 Member 객체를 저장시키기 위한 과정 End</span>\r\n\r\n    <span class=\"token comment\">// 이 과정을 거치게 될 것이다.</span>\r\n    <span class=\"token class-name\">Member</span> findMember <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token class-name\">Long</span> findTeamId <span class=\"token operator\">=</span> findMember<span class=\"token punctuation\">.</span><span class=\"token function\">getTeamId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token class-name\">Team</span> findTeam <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Team</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> findTeamId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>findTeam<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\">//... EntityManager, try{} catch{} 등의 과정 생략.</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>연관 관계를 생성하지 않고, 객체 모델링이 테이블에 맞춘 형식이라면 위와 같이 Member를 통해 Team의 Id를 얻고 그 Id로 Team 객체를 얻게 될 것이다. 이는 Java스럽지 않다고 할 수 있다. (이런 현상을 협력 관계를 만들지 못한다고 할 수도 있다.)</p>\n<p>협력 관계가 없는 문제점을 해결하고자 사용하는 연관 관계 매핑이며, 상세 과정은 아래에서 설명한다.</p>\n<hr>\n<h3 id=\"2-단방향-연관-관계\" style=\"position:relative;\"><a href=\"#2-%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84\" aria-label=\"2 단방향 연관 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 단방향 연관 관계</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 645px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAAAAgMAAAAAAAAAAAAAAAAAAAIBAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHZZbSQD//EABcQAQADAAAAAAAAAAAAAAAAABARIUL/2gAIAQEAAQUCmzR//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPwE//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPwE//8QAFhAAAwAAAAAAAAAAAAAAAAAAACBR/9oACAEBAAY/AiL/AP/EABsQAQACAgMAAAAAAAAAAAAAAAEAESExQVFh/9oACAEBAAE/Ib4rXkaOYNRC+Ih1DU//2gAMAwEAAgADAAAAENAP/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAgEBPxA//8QAHBABAQEAAQUAAAAAAAAAAAAAAREAITFBYYHR/9oACAEBAAE/EBH0bhM+5jRjvc6W3zhQB6zgoY8cYAAJv//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"obj02\"\n        title=\"obj02\"\n        src=\"/static/e13401114adb8ed5299c60ab89ab169b/8ba2d/obj02.jpg\"\n        srcset=\"/static/e13401114adb8ed5299c60ab89ab169b/4ec73/obj02.jpg 180w,\n/static/e13401114adb8ed5299c60ab89ab169b/158ba/obj02.jpg 360w,\n/static/e13401114adb8ed5299c60ab89ab169b/8ba2d/obj02.jpg 645w\"\n        sizes=\"(max-width: 645px) 100vw, 645px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>1.에서의 Member 객체를 다음과 같이 수정한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Member.java</span>\r\n<span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span>\r\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"MEMBER_ID\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"USERNAME\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">//@Column(name = \"TEAM_ID\")</span>\r\n    <span class=\"token comment\">//private Long teamId;</span>\r\n    <span class=\"token annotation punctuation\">@ManyToOne</span>\r\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"TEAM_ID\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Team</span> team<span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\">// Getter, Setter, ToString()</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>위와 같이 Member 객체를 수정한 것 만으로, 1. JpaMain.java에서 Team 객체 정보를 얻고자 했던 많은 과정이 단축된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaMain</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> args<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// Main.java 일부</span>\r\n    <span class=\"token comment\">// Team과 Member 객체를 저장시키기 위한 과정 Start</span>\r\n    <span class=\"token class-name\">Team</span> team <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    team<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TeamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    em<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    member<span class=\"token punctuation\">.</span><span class=\"token function\">setUsername</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\">//member.setTeamId(team.getId()); </span>\r\n    member<span class=\"token punctuation\">.</span><span class=\"token function\">setTeam</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    em<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\">// Team과 Member 객체를 저장시키기 위한 과정 End</span>\r\n\r\n    <span class=\"token comment\">/* DB에서 조회하는 쿼리를 보고 싶다면 해당 주석을 제거하면 된다.\r\n    em.flush();\r\n    em.clear();\r\n    */</span>\r\n        \r\n    <span class=\"token comment\">// 이 과정을 거치게 될 것이다.</span>\r\n    <span class=\"token class-name\">Member</span> findMember <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">find</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">.</span><span class=\"token function\">getId</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token class-name\">Team</span> findTeam <span class=\"token operator\">=</span> findMember<span class=\"token punctuation\">.</span><span class=\"token function\">getTeam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span>findTeam<span class=\"token punctuation\">.</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token comment\">//... EntityManager, try{} catch{} 등의 과정 생략.</span>\r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3 id=\"3-양방향-연관-관계\" style=\"position:relative;\"><a href=\"#3-%EC%96%91%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84\" aria-label=\"3 양방향 연관 관계 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 양방향 연관 관계</h3>\n<h4 id=\"-의문점-1\" style=\"position:relative;\"><a href=\"#-%EC%9D%98%EB%AC%B8%EC%A0%90-1\" aria-label=\" 의문점 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>* 의문점</h4>\n<ul>\n<li>2.에서의 단방향 연관 관계에서 Team 객체를 통해 Team에 속한 Member를 얻는 것이 가능할까?</li>\n</ul>\n<p>​\t\t→ 결론부터 말하면 안 된다. 왜? Team에서 Member의 연관 관계 설정이 없기 때문이다. 즉, 양방향 연관 관계를 맺지 않았기 때문이다.</p>\n<hr>\n<blockquote>\n<p>단방향 연관 관계의 Member와 Team 객체를 수정해 사용한다.</p>\n</blockquote>\n<ul>\n<li>\n<p>Team 객체에서 Team에 속한 Member를 얻기 위해서, 기존의 Team 객체에 Member와 관련된 연관 관계를 추가한다.</p>\n<p>​\t@OneToMany를 사용하며, mappedBy 속성으로 어떤 객체가 연관 관계의 주인인지 표현한다.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Team.java | Member.java는 단방향 예시와 동일.</span>\r\n<span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Team</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Id</span>\r\n    <span class=\"token annotation punctuation\">@GeneratedValue</span>\r\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"TEAM_ID\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token comment\">// 추가 코드</span>\r\n    <span class=\"token annotation punctuation\">@OneToMany</span><span class=\"token punctuation\">(</span>mappedBy <span class=\"token operator\">=</span> <span class=\"token string\">\"team\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> members <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\">// Getter, Setter, ToString()</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Member.java 1.의 단방향 연관 관계의 Member와 동일하다.</span>\r\n<span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Id</span> <span class=\"token annotation punctuation\">@GeneratedValue</span>\r\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"MEMBER_ID\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token annotation punctuation\">@Column</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"USERNAME\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> username<span class=\"token punctuation\">;</span>\r\n\r\n    <span class=\"token comment\">//@Column(name = \"TEAM_ID\")</span>\r\n    <span class=\"token comment\">//private Long teamId;</span>\r\n    <span class=\"token annotation punctuation\">@ManyToOne</span>\r\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"TEAM_ID\"</span><span class=\"token punctuation\">)</span>\r\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Team</span> team<span class=\"token punctuation\">;</span>\r\n    \r\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token comment\">// Getter, Setter, ToString()</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h4 id=\"-양방향-연관-관계의-주인\" style=\"position:relative;\"><a href=\"#-%EC%96%91%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84%EC%9D%98-%EC%A3%BC%EC%9D%B8\" aria-label=\" 양방향 연관 관계의 주인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>* 양방향 연관 관계의 주인?</h4>\n<ul>\n<li>\n<p>연관 관계의 주인은 DB 테이블 상의 외래 키가 있는 객체다. 즉, 1:N 관계에서 N이 연관 관계의 주인이 된다.</p>\n<p>위의 Member와 Team의 사례로 보자면, Member가 N이고, Team이 1이므로 Member 객체가 연관 관계의 주인이 된다.</p>\n<p>정확하게 얘기하면, Member.team이 주인이 된다.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 597px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.222222222222214%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAKABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAECAwX/xAAUAQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIQAxAAAAHtGhCw/8QAGBAAAgMAAAAAAAAAAAAAAAAAATECEDL/2gAIAQEAAQUCLKijqv/EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABwQAAMAAQUAAAAAAAAAAAAAAAABERAhQWGBkf/aAAgBAQABPyFtNfQnD3Aq2EUkEf/aAAwDAQACAAMAAAAQcw//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAECAQE/ED//xAAcEAEBAAICAwAAAAAAAAAAAAABEQAhMVFBcbH/2gAIAQEAAT8QrBDsz5kxxnlUzh2Pppm0izmZawTpMAGgM//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"obj03\"\n        title=\"obj03\"\n        src=\"/static/5e42f78a5d65a08e0ec9ee55affb458a/7aa7d/obj03.jpg\"\n        srcset=\"/static/5e42f78a5d65a08e0ec9ee55affb458a/4ec73/obj03.jpg 180w,\n/static/5e42f78a5d65a08e0ec9ee55affb458a/158ba/obj03.jpg 360w,\n/static/5e42f78a5d65a08e0ec9ee55affb458a/7aa7d/obj03.jpg 597w\"\n        sizes=\"(max-width: 597px) 100vw, 597px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h4 id=\"-양방향-연관-관계-매핑-규칙\" style=\"position:relative;\"><a href=\"#-%EC%96%91%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EA%B7%9C%EC%B9%99\" aria-label=\" 양방향 연관 관계 매핑 규칙 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>* 양방향 연관 관계 매핑 규칙</h4>\n<ol>\n<li>연관 관계의 주인만이 외래 키를 관리(등록, 수정)</li>\n<li>주인이 아닌 쪽은 읽기만 가능</li>\n<li>주인은 mappedBy 속성 사용하지 않는다.</li>\n<li>주인이 아닌 쪽(1:N에서 1의 역할)은 mappedBy 속성으로 주인을 지정한다.</li>\n</ol>\n<hr>\n<h4 id=\"-양방향-연관-관계-매핑-시-주의할-점-\" style=\"position:relative;\"><a href=\"#-%EC%96%91%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EC%8B%9C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90-\" aria-label=\" 양방향 연관 관계 매핑 시 주의할 점  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>! 양방향 연관 관계 매핑 시 주의할 점 !</h4>\n<ol>\n<li>\n<p>연관 관계의 주인에 값을 입력 안 하는 경우.</p>\n<p>​\t위의 Member.team 에 값을 넣지 않는 경우 + team.getMembers().add(Member) 에 값이 입력되지 않는 경우 둘 다 포함.</p>\n</li>\n<li>\n<p>양방향 매핑 시 발생할 수 있는 무한 루프 조심 (ex: toString(), lombok, JSON 생성 라이브러리)</p>\n</li>\n</ol>\n<h5 id=\"-각-상황-예시와-방지책\" style=\"position:relative;\"><a href=\"#-%EA%B0%81-%EC%83%81%ED%99%A9-%EC%98%88%EC%8B%9C%EC%99%80-%EB%B0%A9%EC%A7%80%EC%B1%85\" aria-label=\" 각 상황 예시와 방지책 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>* 각 상황 예시와 방지책</h5>\n<h6 id=\"1-연관-관계-주인에-값-미입력\" style=\"position:relative;\"><a href=\"#1-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9D%B8%EC%97%90-%EA%B0%92-%EB%AF%B8%EC%9E%85%EB%A0%A5\" aria-label=\"1 연관 관계 주인에 값 미입력 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) 연관 관계 주인에 값 미입력.</h6>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// JpaMain.java</span>\r\n<span class=\"token class-name\">Team</span> team <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nteam<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TeamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nem<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nmember<span class=\"token punctuation\">.</span><span class=\"token function\">setUsername</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nem<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// 역방향 연관 관계</span>\r\nteam<span class=\"token punctuation\">.</span><span class=\"token function\">getMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>위 코드를 실행 시, DB에 실제 저장되는 값은 다음과 같다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 253px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.88888888888889%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHsGoqo/8QAFhABAQEAAAAAAAAAAAAAAAAAARAA/9oACAEBAAEFAsDSf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAADEQAP/aAAgBAQAGPwJzG//EABoQAAMBAAMAAAAAAAAAAAAAAAABIREQMVH/2gAIAQEAAT8hyuxCi+6Nd0Ji4//aAAwDAQACAAMAAAAQFB//xAAUEQEAAAAAAAAAAAAAAAAAAAAQ/9oACAEDAQE/ED//xAAVEQEBAAAAAAAAAAAAAAAAAAAQEf/aAAgBAgEBPxCn/8QAHBABAQABBQEAAAAAAAAAAAAAAREAECExQbFh/9oACAEBAAE/ELdorxH3Eml6GuADcfQTF4UXYj7nIKvdbp//2Q=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"obj04\"\n        title=\"obj04\"\n        src=\"/static/758867611d5ed35fd4df2f6cf23c8563/7e1ca/obj04.jpg\"\n        srcset=\"/static/758867611d5ed35fd4df2f6cf23c8563/4ec73/obj04.jpg 180w,\n/static/758867611d5ed35fd4df2f6cf23c8563/7e1ca/obj04.jpg 253w\"\n        sizes=\"(max-width: 253px) 100vw, 253px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>\n<p>Member의 Team_id가 null로 들어가는 것을 확인할 수 있는데, 연관 관계의 주인인 Member의 Team, 즉, Member.setTeam() 으로 값을 입력해야 저장된다.</p>\n<p>위의 사례로 추가적으로 알 수 있는 중요 사항이 있는데, 바로 <strong>역방향 연관 관계(주인이 아닌 쪽, Team)는 읽기만 가능하다</strong>는 것이다.</p>\n<p>아래와 같이 수정해야 MEMBER의 TEAM_ID가 null로 입력되지 않는다.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// JpaMain.java</span>\r\n<span class=\"token class-name\">Team</span> team <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nteam<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"TeamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nem<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nmember<span class=\"token punctuation\">.</span><span class=\"token function\">setUsername</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\nmember<span class=\"token punctuation\">.</span><span class=\"token function\">setTeam</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 주인인 Member.team 값을 설정한다.</span>\r\nem<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\r\n\r\n<span class=\"token comment\">// 역방향 연관 관계</span>\r\nteam<span class=\"token punctuation\">.</span><span class=\"token function\">getMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 247px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 78.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAQABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAAECBf/EABUBAQEAAAAAAAAAAAAAAAAAAAAB/9oADAMBAAIQAxAAAAHsJuKqP//EABcQAAMBAAAAAAAAAAAAAAAAAAABEBH/2gAIAQEAAQUCwSmCn//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABYQAQEBAAAAAAAAAAAAAAAAADEAIP/aAAgBAQAGPwJnP//EABsQAAICAwEAAAAAAAAAAAAAAAABEXEQQZFR/9oACAEBAAE/IbuDVsQ/ZLPgkLH/2gAMAwEAAgADAAAAEDQf/8QAFBEBAAAAAAAAAAAAAAAAAAAAEP/aAAgBAwEBPxA//8QAFREBAQAAAAAAAAAAAAAAAAAAARD/2gAIAQIBAT8QWf/EABwQAQACAgMBAAAAAAAAAAAAAAEAESExEHGxQf/aAAgBAQABPxAst5XV/YsqD1cAM91VHFq9dK9mG+u+P//Z'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"obj05\"\n        title=\"obj05\"\n        src=\"/static/73de372e8e6d2a7e9ba54ad0db2c9321/1455d/obj05.jpg\"\n        srcset=\"/static/73de372e8e6d2a7e9ba54ad0db2c9321/4ec73/obj05.jpg 180w,\n/static/73de372e8e6d2a7e9ba54ad0db2c9321/1455d/obj05.jpg 247w\"\n        sizes=\"(max-width: 247px) 100vw, 247px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>:ear: 추가 Tip! - 연관 관계 편의 메소드 설정.</p>\n<p>모든 양방향 연관 관계에 대해 신경을 못 쓸 수도 있다. 그래서 연관 관계 객체의 Setter를 수정해 편의 메소드를 설정하는 방법이 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Member.java 1.의 단방향 연관 관계의 Member와 동일하다.</span>\r\n<span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\r\n    <span class=\"token comment\">// 각 컬럼 매핑 설정...</span>\r\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setTeam</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Team</span> team<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\r\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>team <span class=\"token operator\">=</span> team<span class=\"token punctuation\">;</span>\r\n        <span class=\"token comment\">// 위의 JpaMain.java에서의 역방향 연관 관계</span>\r\n        team<span class=\"token punctuation\">.</span><span class=\"token function\">getMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> \r\n    <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>JpaMain.java의 역방향 연관 관계를 Setter에 추가함으로, Member.setTeam()을 하는 것으로 같은 효과를 얻을 수 있다.</p>\n<blockquote>\n<p>위에선 연관 관계의 주인인 Member에서 역방향 연관 관계를 설정했지만, 반대로 Team 객체에서 설정할 수도 있다. 상황 따라 정하기 나름인 것으로 알고 그때그때 맞춰 적용하면 된다.</p>\n</blockquote>\n<hr>\n<h6 id=\"2-무한-루프---ex-tostring\" style=\"position:relative;\"><a href=\"#2-%EB%AC%B4%ED%95%9C-%EB%A3%A8%ED%94%84---ex-tostring\" aria-label=\"2 무한 루프   ex tostring permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) 무한 루프 - ex: toString()</h6>\n<ul>\n<li>toString()을 연관 관계 양쪽에 설정한 경우, 서로 연관된 객체의 toString()을 호출한다. stack overflow 에러가 발생하는 상황이 온다.</li>\n</ul>\n<p>​\t! 해결책 !</p>\n<p>​\t1) Controller 단에선 Entity를 반환하지 않도록 설계한다.</p>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EA%B8%B0%EC%B4%88\">다양한 연관 관계 매핑 기초</a></p>\n<ul>\n<li>\n<p><a href=\"#1-%EA%B0%9D%EC%B2%B4%EC%99%80-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84%EC%9D%98-%EC%B0%A8%EC%9D%B4\">1. 객체와 테이블 연관 관계의 차이</a></p>\n<ul>\n<li><a href=\"#-%EC%9D%98%EB%AC%B8%EC%A0%90\">* 의문점</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84\">2. 단방향 연관 관계</a></p>\n</li>\n<li>\n<p><a href=\"#3-%EC%96%91%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84\">3. 양방향 연관 관계</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%9D%98%EB%AC%B8%EC%A0%90-1\">* 의문점</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%96%91%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84%EC%9D%98-%EC%A3%BC%EC%9D%B8\">* 양방향 연관 관계의 주인?</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%96%91%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EA%B7%9C%EC%B9%99\">* 양방향 연관 관계 매핑 규칙</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%96%91%EB%B0%A9%ED%96%A5-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EC%8B%9C-%EC%A3%BC%EC%9D%98%ED%95%A0-%EC%A0%90-\">! 양방향 연관 관계 매핑 시 주의할 점 !</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EA%B0%81-%EC%83%81%ED%99%A9-%EC%98%88%EC%8B%9C%EC%99%80-%EB%B0%A9%EC%A7%80%EC%B1%85\">* 각 상황 예시와 방지책</a></p>\n<ul>\n<li><a href=\"#1-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EC%A3%BC%EC%9D%B8%EC%97%90-%EA%B0%92-%EB%AF%B8%EC%9E%85%EB%A0%A5\">(1) 연관 관계 주인에 값 미입력.</a></li>\n<li><a href=\"#2-%EB%AC%B4%ED%95%9C-%EB%A3%A8%ED%94%84---ex-tostring\">(2) 무한 루프 - ex: toString()</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","excerpt":"다양한 연관 관계 매핑 기초 들어가기 전에 프로그래머스에서 JPA가 아닌 JDBC Template를 이용한 과제관이 있다. 과제관을 다 풀진 못 했었지만, JPA를 사용하는 근본 목적과 동일한 생각을 경험했다.  → JDBC Template을 사용하면 객체 중심적인 프로그래밍이 아닌 SQL 매퍼로서의 프로그래밍을 하겠끔 된다? 위의 경험으로 이 상황을 연관 관계로 풀어낼 수 있는 지가 JPA를 사용하는 숙련도 판단 근거일 것이라 생각한다. (물론 그 배경으로 관계형 DB 모델에 관한 숙련도가 있겟지만..) 그래서 이번 강의 시간과 차후 강의인 고급 매핑, 상속관계를 나만의 방식으로 체득해야겠다고 다짐했다. 1. 객체와 테이블 연관 관계의 차이 다음과 같은 Member, Team 객체가 있고, DB(테이블)에 맞춘 모델링을 한 것이라 가정하자.  * 의문점 Member를 통해 Team 객체의 정보를 얻어오려면 어떤 방식을 거치게 될까? 연관 관계를 생성하지 않고, 객체 모델링이 테이…","frontmatter":{"date":"January 08, 2022","title":"JPA 기본 강의 정리 - 03. 다양한 연관 관계 매핑 기초","categories":"JPA_Basic","author":"shim8934","emoji":"😄"},"fields":{"slug":"/JPA_Basic03/"}},"next":{"id":"2bd3a78c-84e5-5683-9054-241312c8105f","html":"<h2 id=\"엔티티-매핑---기본\" style=\"position:relative;\"><a href=\"#%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%A7%A4%ED%95%91---%EA%B8%B0%EB%B3%B8\" aria-label=\"엔티티 매핑   기본 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>엔티티 매핑 - 기본</h2>\n<ol>\n<li>객체와 테이블 매핑 : @Entity, @Table</li>\n<li>필드와 컬럼 매핑 : @Column</li>\n<li>기본 키 매핑 : @Id</li>\n<li>연관관계 매핑 : @ManyToOne, @JoinColumn</li>\n</ol>\n<hr>\n<h3 id=\"1-entity\" style=\"position:relative;\"><a href=\"#1-entity\" aria-label=\"1 entity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. @Entity</h3>\n<ul>\n<li>JPA를 사용해서 테이블과 매핑할 클래스에 사용 필수.</li>\n</ul>\n<p><strong>!주의</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">1) 기본 생성자 필수!\r\n2) final 클래스, enum, interface, inner 클래스 사용 X\r\n3) 저장할 필드에 final 사용 X</code></pre></div>\n<hr>\n<h3 id=\"2-table\" style=\"position:relative;\"><a href=\"#2-table\" aria-label=\"2 table permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. @Table</h3>\n<ul>\n<li>Entity와 매핑할 테이블 지정 시 사용.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">// Member 객체의 매핑 테이블 이름이 MBR 테이블인 경우</span>\r\n<span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token annotation punctuation\">@Table</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"MBR\"</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h3 id=\"3-entity의-속성-테이블-컬럼--어노테이션-정리\" style=\"position:relative;\"><a href=\"#3-entity%EC%9D%98-%EC%86%8D%EC%84%B1-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%BB%AC%EB%9F%BC--%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98-%EC%A0%95%EB%A6%AC\" aria-label=\"3 entity의 속성 테이블 컬럼  어노테이션 정리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Entity의 속성 (테이블 컬럼)  어노테이션 정리</h3>\n<table>\n<thead>\n<tr>\n<th align=\"left\">어노테이션</th>\n<th align=\"left\">설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"left\">@Column</td>\n<td align=\"left\">컬럼 매핑</td>\n</tr>\n<tr>\n<td align=\"left\">@Temporal</td>\n<td align=\"left\">날짜 타입 매핑</td>\n</tr>\n<tr>\n<td align=\"left\">@Enumerated</td>\n<td align=\"left\">enum 타입 매핑</td>\n</tr>\n<tr>\n<td align=\"left\">@Lob</td>\n<td align=\"left\">BLOB, CLOB 매핑</td>\n</tr>\n<tr>\n<td align=\"left\">@Transient</td>\n<td align=\"left\">특정 필드를 컬럼에 매핑하지 않음(매핑 무시)</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"1-column\" style=\"position:relative;\"><a href=\"#1-column\" aria-label=\"1 column permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) @Column</h4>\n<table>\n<thead>\n<tr>\n<th>속성</th>\n<th>설명</th>\n<th>기본값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>name</td>\n<td>필드와 매핑할 테이블의 컬럼 이름</td>\n<td>객체의 필드 이름</td>\n</tr>\n<tr>\n<td>insertable,<br />updatable</td>\n<td>등록, 변경 가능 여부</td>\n<td>TRUE</td>\n</tr>\n<tr>\n<td>nullable(DDL)</td>\n<td>null 값의 허용 여부를 설정. false로 설정하면 DDL 생성 시에 not null 제약조건이 붙는다.</td>\n<td></td>\n</tr>\n<tr>\n<td>unique(DDL)</td>\n<td>@Table의 uniqueConstraints와 같지만 한 컬럼에 간단히 유니크 제약조건을 걸 때 사용.</td>\n<td></td>\n</tr>\n<tr>\n<td>columnDefinition(DDL)</td>\n<td>데이터베이스 컬럼 정보를 직접 줄 수 있다.<br />ex) varchar(100) default ‘EMPTY’</td>\n<td>필드의 자바 타입과 방언 정보를 사용해 지정</td>\n</tr>\n<tr>\n<td>length(DDL)</td>\n<td>문자 길이 제약조건, String 타입에만 사용.</td>\n<td>255</td>\n</tr>\n<tr>\n<td>precision,<br />scale(DDL)</td>\n<td>BigDecimal 타입에서 사용.(BigInteger도 가능)<br /> pricision은 소수점을 포함한 전체 자릿수를, scale은 소수의 자릿수다.<br /> 참고로 double, float 타입에는 적용되지 않는다. 아주 큰 숫자나 정밀한 소수를 다루어야 할 때만 사용.</td>\n<td>precision = 19, scale = 2</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"2-enumerated\" style=\"position:relative;\"><a href=\"#2-enumerated\" aria-label=\"2 enumerated permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) @Enumerated</h4>\n<ul>\n<li>자바 enum 타입을 매핑할 때 사용</li>\n</ul>\n<p><strong>! 주의 ! : ORDINAL value는 사용하지 말 것.!</strong></p>\n<table>\n<thead>\n<tr>\n<th>속성</th>\n<th>설명</th>\n<th>기본값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>value</td>\n<td>1) EnumType.ORDINAL : enum 순서를 데이터베이스에 저장<br />2) EnumType.STRING : enum 이름을 데이터베이스에 저장</td>\n<td>EnumType.ORDINAL</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"3-temporal\" style=\"position:relative;\"><a href=\"#3-temporal\" aria-label=\"3 temporal permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3) @Temporal</h4>\n<ul>\n<li>날짜 타입(java.util.Date, java.util.Calendar)을 매핑할 때 사용</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>속성</th>\n<th>설명</th>\n<th>Annotation을 안 쓰고 자바 타입만 쓸 시<br />매핑되는 자바 타입!</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>value</td>\n<td>1) TemporalType.DATE : 날짜, 데이터베이스 date 타입과 매핑(예: 2022-01-11)<br />2) TemporalType.TIME : 시간, 데이터베이스 time 타입과 매핑(예: 12:16:10)<br />3) TemporalType.TIMESTAMP : 날짜와 시간, 데이터베이스 timestamp 타입과 매핑(예: 2022-01-11 12:16:10)</td>\n<td>1) LocalDate or Date<br />2) LocalDate or Date<br />3) LocalDateTime</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"4-lob\" style=\"position:relative;\"><a href=\"#4-lob\" aria-label=\"4 lob permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4) @Lob</h4>\n<ul>\n<li>데이터베이스 BLOB, CLOB 타입과 매핑 (String이면 CLOB, 나머지는 BLOB)\n<ol>\n<li>CLOB - String, char[], java.sql.CLOB</li>\n<li>BLOB - byte[], java.sql.BLOB</li>\n</ol>\n</li>\n</ul>\n<hr>\n<h4 id=\"5-transient\" style=\"position:relative;\"><a href=\"#5-transient\" aria-label=\"5 transient permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5) @Transient</h4>\n<ul>\n<li>DB에 저장되는 정보가 아닌 임시로 쓸 변수일 경우</li>\n</ul>\n<hr>\n<h3 id=\"4-기본-키-매핑\" style=\"position:relative;\"><a href=\"#4-%EA%B8%B0%EB%B3%B8-%ED%82%A4-%EB%A7%A4%ED%95%91\" aria-label=\"4 기본 키 매핑 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 기본 키 매핑</h3>\n<h4 id=\"1-id\" style=\"position:relative;\"><a href=\"#1-id\" aria-label=\"1 id permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) @Id</h4>\n<ul>\n<li>PK로 쓰이는 컬럼에 <strong>직접 할당</strong> 시 사용.</li>\n</ul>\n<hr>\n<h4 id=\"2-generatedvalue\" style=\"position:relative;\"><a href=\"#2-generatedvalue\" aria-label=\"2 generatedvalue permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) @GeneratedValue</h4>\n<ul>\n<li>DB에서 <strong>자동적으로 PK를 할당하게</strong> 하는 전략.</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>속성</th>\n<th>설명</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>IDENTITY</td>\n<td>데이터베이스에 위임, MYSQL</td>\n</tr>\n<tr>\n<td>SEQUENCE</td>\n<td>데이터베이스 시퀸스 오브젝트 사용, ORACLE<br /> * @SequenceGenerator 필요</td>\n</tr>\n<tr>\n<td>TABLE</td>\n<td>키 생성용 테이블 사용, 모든 DB에서 사용<br /> * @TableGenerator 필요</td>\n</tr>\n<tr>\n<td>AUTO</td>\n<td>방언에 따라 자동 지정, 기본값</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<ul>\n<li>GeneratedValue 전략별 예시</li>\n</ul>\n<h5 id=\"1-identity\" style=\"position:relative;\"><a href=\"#1-identity\" aria-label=\"1 identity permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(1) IDENTITY</h5>\n<ul>\n<li>주로 MySQL, PostgreSQL, SQL Server, DB2에서 사용하며, 기본 키 생성을 DB에 위임.</li>\n<li>영속성 컨텍스트에 종속 시점(em.persist())에 즉시 INSERT SQL을 실행하고, 해당 키를 DB에서 조회하는 특징이 있다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\r\n\t <span class=\"token annotation punctuation\">@Id</span>\r\n\t <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>IDENTITY<span class=\"token punctuation\">)</span>\r\n\t <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span></code></pre></div>\n<hr>\n<h5 id=\"2-sequence\" style=\"position:relative;\"><a href=\"#2-sequence\" aria-label=\"2 sequence permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(2) SEQUENCE</h5>\n<ul>\n<li>오라클, PostgreSQL, DB2, H2 DB에서 사용하며, 유일한 값을 순서대로 생성하는 특별한 DB 오브젝트.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token annotation punctuation\">@SequenceGenerator</span><span class=\"token punctuation\">(</span>\r\n\t name <span class=\"token operator\">=</span> “MEMBER_SEQ_GENERATOR\"<span class=\"token punctuation\">,</span>\r\n\t sequenceName <span class=\"token operator\">=</span> “MEMBER_SEQ\"<span class=\"token punctuation\">,</span> <span class=\"token comment\">//매핑할 데이터베이스 시퀀스 이름</span>\r\n\t initialValue <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> allocationSize <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\r\n\t <span class=\"token annotation punctuation\">@Id</span>\r\n\t <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>SEQUENCE<span class=\"token punctuation\">,</span>\r\n\t \tgenerator <span class=\"token operator\">=</span> <span class=\"token string\">\"MEMBER_SEQ_GENERATOR\"</span><span class=\"token punctuation\">)</span>\r\n\t <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span> </code></pre></div>\n<table>\n<thead>\n<tr>\n<th>속성</th>\n<th>설명</th>\n<th>기본값</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>name</td>\n<td>식별자 생성기 이름.</td>\n<td>필수</td>\n</tr>\n<tr>\n<td>sequenceName</td>\n<td>데이터베이스에 등록되어 있는 시퀀스 이름.</td>\n<td>hibrenate_sequence</td>\n</tr>\n<tr>\n<td>initialValue</td>\n<td>DDL 생성 시에만 사용.<br />시퀀스 DDL을 생성할 때 처음 1 시작하는 수를 지정한다.</td>\n<td>1</td>\n</tr>\n<tr>\n<td>allocationSize</td>\n<td>시퀀스 한 번 호출에 증가하는 수(성능 최적화에 사용됨)<br /> *** 데이터베이스 시퀀스 값이 하나씩 증가하도록 설정되어 있으면 이 값을 반드시 1로 설정해야 함.**</td>\n<td><strong>50</strong></td>\n</tr>\n<tr>\n<td>catalog, schema</td>\n<td>데이터베이스 catalog, schema 이름</td>\n<td></td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h5 id=\"3-table\" style=\"position:relative;\"><a href=\"#3-table\" aria-label=\"3 table permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(3) TABLE</h5>\n<ul>\n<li>키 생성 전용 테이블을 하나 만들어 DB 시퀀스를 흉내내는 전략이며, 모든 DB에 적용 가능.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">create</span> <span class=\"token keyword\">table</span> MY_SEQUENCES <span class=\"token punctuation\">(</span>\r\n\t sequence_name <span class=\"token keyword\">varchar</span><span class=\"token punctuation\">(</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">not</span> <span class=\"token boolean\">null</span><span class=\"token punctuation\">,</span>\r\n\t next_val <span class=\"token keyword\">bigint</span><span class=\"token punctuation\">,</span>\r\n\t <span class=\"token keyword\">primary</span> <span class=\"token keyword\">key</span> <span class=\"token punctuation\">(</span> sequence_name <span class=\"token punctuation\">)</span>\r\n<span class=\"token punctuation\">)</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\r\n<span class=\"token annotation punctuation\">@TableGenerator</span><span class=\"token punctuation\">(</span>\r\n\t name <span class=\"token operator\">=</span> <span class=\"token string\">\"MEMBER_SEQ_GENERATOR\"</span><span class=\"token punctuation\">,</span>\r\n\t table <span class=\"token operator\">=</span> <span class=\"token string\">\"MY_SEQUENCES\"</span><span class=\"token punctuation\">,</span>\r\n\t pkColumnValue <span class=\"token operator\">=</span> “MEMBER_SEQ\"<span class=\"token punctuation\">,</span> allocationSize <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\r\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span>\r\n\t <span class=\"token annotation punctuation\">@Id</span>\r\n\t <span class=\"token annotation punctuation\">@GeneratedValue</span><span class=\"token punctuation\">(</span>strategy <span class=\"token operator\">=</span> <span class=\"token class-name\">GenerationType</span><span class=\"token punctuation\">.</span>TABLE<span class=\"token punctuation\">,</span>\r\n\t\t generator <span class=\"token operator\">=</span> <span class=\"token string\">\"MEMBER_SEQ_GENERATOR\"</span><span class=\"token punctuation\">)</span>\r\n\t <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span> </code></pre></div>\n<ul>\n<li>여러 웹서버에서 구동 시, 발생하는 동기화 문제를 해결하기 좋은 전략이지만, 별도의 테이블을 하나 더 설정해 사용함으로 인해 <strong>성능 이슈가 발생할 수 있다</strong>.</li>\n</ul>\n<hr>\n<h5 id=\"4-auto\" style=\"position:relative;\"><a href=\"#4-auto\" aria-label=\"4 auto permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>(4) AUTO</h5>\n<ul>\n<li>방언에 따라 자동 지정 (GeneratedValue 의 기본값.)</li>\n</ul>\n<hr>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%97%94%ED%8B%B0%ED%8B%B0-%EB%A7%A4%ED%95%91---%EA%B8%B0%EB%B3%B8\">엔티티 매핑 - 기본</a></p>\n<ul>\n<li>\n<p><a href=\"#1-entity\">1. @Entity</a></p>\n</li>\n<li>\n<p><a href=\"#2-table\">2. @Table</a></p>\n</li>\n<li>\n<p><a href=\"#3-entity%EC%9D%98-%EC%86%8D%EC%84%B1-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%BB%AC%EB%9F%BC--%EC%96%B4%EB%85%B8%ED%85%8C%EC%9D%B4%EC%85%98-%EC%A0%95%EB%A6%AC\">3. Entity의 속성 (테이블 컬럼)  어노테이션 정리</a></p>\n<ul>\n<li><a href=\"#1-column\">1) @Column</a></li>\n<li><a href=\"#2-enumerated\">2) @Enumerated</a></li>\n<li><a href=\"#3-temporal\">3) @Temporal</a></li>\n<li><a href=\"#4-lob\">4) @Lob</a></li>\n<li><a href=\"#5-transient\">5) @Transient</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#4-%EA%B8%B0%EB%B3%B8-%ED%82%A4-%EB%A7%A4%ED%95%91\">4. 기본 키 매핑</a></p>\n<ul>\n<li>\n<p><a href=\"#1-id\">1) @Id</a></p>\n</li>\n<li>\n<p><a href=\"#2-generatedvalue\">2) @GeneratedValue</a></p>\n<ul>\n<li><a href=\"#1-identity\">(1) IDENTITY</a></li>\n<li><a href=\"#2-sequence\">(2) SEQUENCE</a></li>\n<li><a href=\"#3-table\">(3) TABLE</a></li>\n<li><a href=\"#4-auto\">(4) AUTO</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"January 07, 2022","title":"JPA 기본 강의 정리 - 02. 엔티티 기본 매핑","categories":"JPA_Basic","author":"shim8934","emoji":"😄"},"fields":{"slug":"/JPA_Basic02/"}},"prev":{"id":"6e9775fc-617c-557e-8e83-c4068ce29d6c","html":"<h2 id=\"다양한-연관-관계-매핑\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91\" aria-label=\"다양한 연관 관계 매핑 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다양한 연관 관계 매핑</h2>\n<h3 id=\"-연관-관계-매핑-시-고려사항-3가지\" style=\"position:relative;\"><a href=\"#-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EC%8B%9C-%EA%B3%A0%EB%A0%A4%EC%82%AC%ED%95%AD-3%EA%B0%80%EC%A7%80\" aria-label=\" 연관 관계 매핑 시 고려사항 3가지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>* 연관 관계 매핑 시 고려사항 3가지</h3>\n<ol>\n<li>다중성</li>\n<li>단방향, 양방향</li>\n<li>연관 관계의 주인</li>\n</ol>\n<hr>\n<h4 id=\"1-다중성\" style=\"position:relative;\"><a href=\"#1-%EB%8B%A4%EC%A4%91%EC%84%B1\" aria-label=\"1 다중성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 다중성</h4>\n<table>\n<thead>\n<tr>\n<th>유형</th>\n<th>Annotation</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>다대일</td>\n<td>@ManyToOne</td>\n</tr>\n<tr>\n<td>일대일</td>\n<td>@OneToOne</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<p>(1) 다대일 (@ManyToOne)</p>\n<ul>\n<li>외래 키가 있는 쪽이 연관 관계의 주인.</li>\n<li>양쪽을 서로 참조하도록 개발</li>\n<li>대상 테이블(@OneToMany) 쪽은 mappedBy 속성 필수.</li>\n</ul>\n<hr>\n<p>(2) 일대일 (@OneToOne)</p>\n<ul>\n<li>일대일 관계의 반대는 일대일</li>\n<li>주 테이블이나 대상 테이블 중에 외래 키 선택 가능\n<ul>\n<li>다대일 양방향 매핑과 동일하게 외래 키가 있는 곳이 연관 관계의 주인.</li>\n<li>반대편은 mappedBy 속성 적용.</li>\n</ul>\n</li>\n<li>외래 키에 데이터베이스 유니크 (UNI) 제약 조건 추가</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>주 테이블에 외래 키</th>\n<th>대상 테이블에 외래 키</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>주 객체가 대상 객체의 참조를 가지는 것처럼 주 테이블에 외래 키를 두고 대상 테이블을 찾음</td>\n<td>대상 테이블에 외래키 존재</td>\n</tr>\n<tr>\n<td>객체 지향 개발자 선호</td>\n<td>전통적인 데이터베이스 개발자 선호</td>\n</tr>\n<tr>\n<td>JPA 매핑 편리</td>\n<td></td>\n</tr>\n<tr>\n<td>장점 - 주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능.</td>\n<td>장점 - 주 테이블과 대상 테이블을 일대일에서 일대다 관계로 변경할 때 테이블 구조 유지.</td>\n</tr>\n<tr>\n<td>단점 - 값이 없으면 외래 키에 Null 허용</td>\n<td>단점 - 프록시 기능의 한계로 <strong>지연 로딩으로 설정해도 항상 즉시 로딩</strong>됨.</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"2-단방향-양방향\" style=\"position:relative;\"><a href=\"#2-%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%96%91%EB%B0%A9%ED%96%A5\" aria-label=\"2 단방향 양방향 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 단방향, 양방향</h4>\n<table>\n<thead>\n<tr>\n<th>테이블</th>\n<th>객체</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1. 외래 키 하나로 양쪽 조인 가능</td>\n<td>1. 참조용 필드가 있는 쪽으로만 참조 가능</td>\n</tr>\n<tr>\n<td>2. 방향이라는 개념 없다.</td>\n<td>2. 한쪽만 참조하면 단방향</td>\n</tr>\n<tr>\n<td></td>\n<td>3. 양쪽이 서로 참조하면 양방향</td>\n</tr>\n</tbody>\n</table>\n<hr>\n<h4 id=\"3-연관-관계의-주인\" style=\"position:relative;\"><a href=\"#3-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84%EC%9D%98-%EC%A3%BC%EC%9D%B8\" aria-label=\"3 연관 관계의 주인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 연관 관계의 주인</h4>\n<ul>\n<li>객체에서 연관 관계는 참조가 2군데 있고, 두 곳 중 테이블의 외래 키를 관리할 곳을 지정해야 함.</li>\n<li>연관 관계의 주인 - 외래 키를 관리하는 참조</li>\n<li>주인의 반대편 - 외래 키에 영향을 주지 않음, 단순 조회만 가능</li>\n</ul>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EB%8B%A4%EC%96%91%ED%95%9C-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91\">다양한 연관 관계 매핑</a></p>\n<ul>\n<li>\n<p><a href=\"#-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84-%EB%A7%A4%ED%95%91-%EC%8B%9C-%EA%B3%A0%EB%A0%A4%EC%82%AC%ED%95%AD-3%EA%B0%80%EC%A7%80\">* 연관 관계 매핑 시 고려사항 3가지</a></p>\n<ul>\n<li><a href=\"#1-%EB%8B%A4%EC%A4%91%EC%84%B1\">1. 다중성</a></li>\n<li><a href=\"#2-%EB%8B%A8%EB%B0%A9%ED%96%A5-%EC%96%91%EB%B0%A9%ED%96%A5\">2. 단방향, 양방향</a></li>\n<li><a href=\"#3-%EC%97%B0%EA%B4%80-%EA%B4%80%EA%B3%84%EC%9D%98-%EC%A3%BC%EC%9D%B8\">3. 연관 관계의 주인</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"January 09, 2022","title":"JPA 기본 강의 정리 - 04. 다양한 연관 관계 매핑 핵심 요약","categories":"JPA_Basic","author":"shim8934","emoji":"😄"},"fields":{"slug":"/JPA_Basic04/"}},"site":{"siteMetadata":{"siteUrl":"https://shim8934.github.io","comments":{"utterances":{"repo":"Shim8934/shim8934.github.io"}}}}},"pageContext":{"slug":"/JPA_Basic03/","nextSlug":"/JPA_Basic02/","prevSlug":"/JPA_Basic04/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}