---
emoji: 😄
title: JPA 기본 강의 정리 - 04. 다양한 연관관계 매핑 핵심 요약
date: '2022-01-09 06:00:00'
author: shim8934
tags: JPA Java
categories: JPA_Basic
---
## 다양한 연관관계 매핑

### * 연관 관계 매핑 시 고려사항 3가지

1. 다중성
2. 단방향, 양방향
3. 연관 관계의 주인

---

#### 1. 다중성

| 유형   | Annotation |
| ------ | ---------- |
| 다대일 | @ManyToOne |
| 일대일 | @OneToOne  |

---

(1) 다대일 (@ManyToOne)

* 외래 키가 있는 쪽이 연관 관계의 주인.
* 양쪽을 서로 참조하도록 개발
* 대상 테이블(@OneToMany) 쪽은 mappedBy 속성 필수.

---

(2) 일대일 (@OneToOne)

* 일대일 관계의 반대는 일대일
* 주 테이블이나 대상 테이블 중에 외래 키 선택 가능
  * 다대일 양방향 매핑과 동일하게 외래 키가 있는 곳이 연관 관계의 주인.
  * 반대편은 mappedBy 속성 적용.
* 외래 키에 데이터베이스 유니크 (UNI) 제약 조건 추가

| 주 테이블에 외래 키                                          | 대상 테이블에 외래 키                                        |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 주 객체가 대상 객체의 참조를 가지는 것처럼 주 테이블에 외래 키를 두고 대상 테이블을 찾음 | 대상 테이블에 외래키 존재                                    |
| 객체 지향 개발자 선호                                        | 전통적인 데이터베이스 개발자 선호                            |
| JPA 매핑 편리                                                |                                                              |
| 장점 - 주 테이블만 조회해도 대상 테이블에 데이터가 있는지 확인 가능. | 장점 - 주 테이블과 대상 테이블을 일대일에서 일대다 관계로 변경할 때 테이블 구조 유지. |
| 단점 - 값이 없으면 외래 키에 Null 허용                       | 단점 - 프록시 기능의 한계로 **지연 로딩으로 설정해도 항상 즉시 로딩**됨. |



---

#### 2. 단방향, 양방향

| 테이블                           | 객체                                     |
| -------------------------------- | ---------------------------------------- |
| 1. 외래 키 하나로 양쪽 조인 가능 | 1. 참조용 필드가 있는 쪽으로만 참조 가능 |
| 2. 방향이라는 개념 없다.         | 2. 한쪽만 참조하면 단방향                |
|                                  | 3. 양쪽이 서로 참조하면 양방향           |

---

#### 3. 연관 관계의 주인

* 객체에서 연관 관계는 참조가 2군데 있고, 두 곳 중 테이블의 외래 키를 관리할 곳을 지정해야 함.
* 연관 관계의 주인 - 외래 키를 관리하는 참조
* 주인의 반대편 - 외래 키에 영향을 주지 않음, 단순 조회만 가능


```toc

```